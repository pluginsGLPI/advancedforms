{#
 # -------------------------------------------------------------------------
 # advancedforms plugin for GLPI
 # -------------------------------------------------------------------------
 #
 # MIT License
 #
 # Permission is hereby granted, free of charge, to any person obtaining a copy
 # of this software and associated documentation files (the "Software"), to deal
 # in the Software without restriction, including without limitation the rights
 # to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 # copies of the Software, and to permit persons to whom the Software is
 # furnished to do so, subject to the following conditions:
 #
 # The above copyright notice and this permission notice shall be included in all
 # copies or substantial portions of the Software.
 #
 # THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 # FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 # -------------------------------------------------------------------------
 # @copyright Copyright (C) 2025 by the advancedforms plugin team.
 # @license   MIT https://opensource.org/licenses/mit-license.php
 # @link      https://github.com/pluginsGLPI/advancedforms
 # -------------------------------------------------------------------------
 #}

{% import 'components/form/fields_macros.html.twig' as fields %}
{% set rand = random() %}

<div class="mb-n3" data-ldap-question-preview>
    {{ fields.dropdownArrayField(
        '_dummy_field',
        '',
        [],
        'no label',
        {
            'no_label'           : true,
            'emptylabel'         : __(
                "Data from LDAP directory",
                "advancedforms"
            ),
            'display_emptychoice': true,
            'full_width'         : true,
            'disabled'           : true,
            'init'               : question is not null ? true: false,
        }
    ) }}
</div>

<div
    class="mt-n1 mb-3"
    data-glpi-form-editor-question-extra-details
>
    {{ fields.dropdownField(
        'AuthLDAP',
        'extra_data[' ~ AUTHLDAP_ID ~ ']',
        extra_data.getAuthLdapIp(),
        'AuthLDAP'|itemtype_name,
        {
            'display_emptychoice': true,
            'full_width'         : true,
            'is_horizontal'      : false,
            'init'               : question is not null ? true : false,
            'on_change'          : 'plugin_advancedforms_on_ldap_change(this)',
        }
    ) }}

    {{ fields.textField(
        'extra_data[' ~ LDAP_FILTER ~ ']',
        extra_data.getLdapFilter(),
        __('Filter'), {
            'additional_attributes': {
                'data-ldap-question-filter_input': true,
            },
            'full_width'   : true,
            'is_horizontal': false,
        }
    ) }}

    {{ fields.dropdownField(
        'RuleRightParameter',
        'extra_data[' ~ LDAP_ATTRIBUTE_ID ~ ']',
        extra_data.getLdapAttributeIp(),
        __('Attribute'), {
            'full_width'   : true,
            'is_horizontal': false,
            'init'         : question is not null ? true: false,
        }
    ) }}
</div>
